// Generated by CoffeeScript 1.6.3
(function() {
  var app, curr_peers, express, logfmt, peer_id, peer_id_counter, port, url_id;

  express = require("express");

  logfmt = require("logfmt");

  app = express();

  app.use(logfmt.requestLogger());

  app.get('/', function(req, res) {
    return res.sendfile('dashboard/index.html');
  });

  app.get('/bookmarklet/:file', function(req, res) {
    return res.sendfile('bookmarklet/' + req.params.file);
  });

  app.get('/bookmarklet/compiled/:file', function(req, res) {
    return res.sendfile('bookmarklet/compiled/' + req.params.file);
  });

  peer_id = "peernum";

  url_id = "onlyurl";

  peer_id_counter = 0;

  curr_peers = [];

  app.post('/new_peer', function(req, res) {
    var response;
    console.log(req, res);
    response = JSON.stringify({
      "peer_id": peer_id + peer_id_counter,
      "peers": curr_peers,
      "url_id": url_id
    });
    peer_id_counter += 1;
    return res.send(response);
  });

  app.post('/delete_peer', function(req, res) {
    return console.log(req, res);
  });

  app.post('/update_peer', function(req, res) {
    return console.log(req, res);
  });

  port = process.env.PORT || 5000;

  app.listen(port, function() {
    return console.log("Listening on " + port);
  });

}).call(this);
